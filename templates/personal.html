{% load static %}
<!DOCTYPE html>
<html lang="zh-TW">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
  <link rel="stylesheet" as="style" onload="this.rel='stylesheet'"
    href="https://fonts.googleapis.com/css2?display=swap&amp;family=Inter%3Awght%40400%3B500%3B700%3B900&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900" />
  <title>高科銀行</title>
  <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="{% static 'style/personal.css' %}" />
  <link rel="stylesheet" href="{% static 'style/style.css' %}" />

  <script src="{% static 'js/personal.js' %}" defer></script>
  <script src="{% static 'js/personal_upload.js' %}" defer></script>
  <style>
    /* 在這裡新增覆蓋： */
    audio,
    canvas,
    embed,
    iframe,
    img,
    object,
    svg,
    video {
      /* 將 display 恢復成 default（各元素的初始預設值） */
      display: initial !important;
      vertical-align: initial !important;
    }
  </style>
</head>

<body>

  <header>
    <a href="{% url 'dashboard_page' %}" style="text-decoration: none;">
      <div class="logo-container">
        <div class="logo">
          <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M42.4379 44C42.4379 44 36.0744 33.9038 41.1692 24C46.8624 12.9336 42.2078 4 42.2078 4L7.01134 4C7.01134 4 11.6577 12.932 5.96912 23.9969C0.876273 33.9029 7.27094 44 7.27094 44L42.4379 44Z"
              fill="currentColor"></path>
          </svg>
        </div>
        <h2 class="brand-name">NKUST Bank</h2>
      </div>
    </a>

    <div class="nav-container">
      <div class="main-nav">
        <a class="nav-link" href="{% url 'dashboard_page' %}">帳務總覽</a>
        <a class="nav-link" href="{% url 'transfer_page' %}">轉帳</a>
        <a class="nav-link" href="{% url 'invest_page' %}">投資</a>
        <a class="nav-link" href="{% url 'recive_page' %}">明細查詢</a>
        <a class="nav-link" href="{% url 'personal_page' %}">個人資料</a>
        <a href="/login/" id="logoutBtn" class="btn-link">
          <button class="btn btn-secondary btn-md">
            <span class="btn-text">Log Out</span>
          </button>
        </a>
      </div>
    </div>
  </header>

  <!-- ========= 歡迎填寫畫面（預設顯示） ========= -->
  <div id="welcome-screen">
    <div class="content-container">
      <!-- 歡迎 Banner -->
      <div class="welcome-banner" id="welcome-banner">
        <div class="welcome-title">歡迎使用個人資料設定</div>
        <div class="welcome-text">請完成以下資料，讓我們更了解您</div>
      </div>

      <!-- 【新增】使用者姓名 -->
      <div class="settings-item" id="name-item">
        <div class="settings-content">
          <div class="settings-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2a5 5 0 1 1 0 10a5 5 0 0 1 0-10zm0 12c-3.33 0-10 1.67-10 5v3h20v-3c0-3.33-6.67-5-10-5z" />
            </svg>
          </div>
          <div class="settings-text">
            <p class="settings-title">姓名</p>
            <p class="settings-description" id="name-display">
              <span class="empty-state">
                <svg xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" fill="currentColor"
                  viewBox="0 0 256 256">
                  <path
                    d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm-8-80V80a8,8,0,0,1,16,0v56a8,8,0,0,1-16,0Zm20,36a12,12,0,1,1-12-12A12,12,0,0,1,140,172Z">
                  </path>
                </svg>
                尚未設定
              </span>
            </p>
          </div>
        </div>
        <button class="add-button" id="name-add-button">
          <svg xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" fill="currentColor" viewBox="0 0 256 256">
            <path
              d="M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z">
            </path>
          </svg>
          新增
        </button>
      </div>

      <!-- 電子郵件 -->
      <div class="settings-item" id="email-item">
        <div class="settings-content">
          <div class="settings-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor"
              viewBox="0 0 256 256">
              <path
                d="M224,48H32a8,8,0,0,0-8,8V192a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A8,8,0,0,0,224,48ZM203.43,64,128,133.15,52.57,64ZM216,192H40V74.19l82.59,75.71a8,8,0,0,0,10.82,0L216,74.19V192Z">
              </path>
            </svg>
          </div>
          <div class="settings-text">
            <p class="settings-title">電子郵件</p>
            <p class="settings-description" id="email-display">
              <span class="empty-state">
                <svg xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" fill="currentColor"
                  viewBox="0 0 256 256">
                  <path
                    d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm-8-80V80a8,8,0,0,1,16,0v56a8,8,0,0,1-16,0Zm20,36a12,12,0,1,1-12-12A12,12,0,0,1,140,172Z">
                  </path>
                </svg>
                尚未設定
              </span>
            </p>
          </div>
        </div>
        <button class="add-button" id="email-add-button">
          <svg xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" fill="currentColor" viewBox="0 0 256 256">
            <path
              d="M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z">
            </path>
          </svg>
          新增
        </button>
      </div>

      <!-- 資料完整度指示 -->
      <div class="completion-indicator" id="completion-indicator">
        <div class="completion-header">
          <div class="completion-title">資料完整度</div>
          <div class="completion-percentage" id="completion-percentage">0%</div>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- 成功動畫（隱藏） -->
  <div class="success-animation" id="success-animation">
    <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
      <circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none"></circle>
      <path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"></path>
    </svg>
    <div class="success-text">設定完成！</div>
    <div class="success-subtext">正在載入您的個人資料...</div>
  </div>

  <!-- ===== 原本的 Header 與主選單等內容 ===== -->
  <div class="hidden" id="main-container">
    <div class="main-content">
      <!-- Main Content（原先的完整內容都放在這裡） -->
      <div class="content-container">
        <!-- 這裡是你原本顯示個人資料的部分 -->
        <!-- ===== 改成這樣 ===== -->
        <div class="profile-header">
          <!-- 加上 relative 與 group，使子元素能夠 group-hover -->
          <div id="avatar"
            class="avatar relative w-32 h-32 bg-gray-300 rounded-full overflow-hidden cursor-pointer group">
            <!-- 如果有真正的圖片，就把 <img> 放進來並改成 cover；這裡範例使用純灰底 -->
            <!-- <img src="你的頭像路徑.jpg"
                 alt="使用者頭像"
                 class="w-full h-full object-cover" /> -->

            <!-- 這層就是「滑鼠移到 avatar 才出現」的遮罩 + 編輯 icon -->
            <div class="absolute inset-0 bg-black bg-opacity-0 rounded-full
                     flex items-center justify-center
                     transition-all duration-200
                     group-hover:bg-opacity-40">
              <!-- 編輯 SVG，一開始用 opacity-0 隱藏，group-hover 時才顯示 -->
              <svg xmlns="http://www.w3.org/2000/svg"
                class="w-8 h-8 text-white opacity-0 transition-opacity duration-200 group-hover:opacity-100" fill="none"
                viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M15.232 5.232l3.536 3.536m-2.036-1.5a2.5 2.5 0 113.536 3.536L7.5 21H3v-4.5L16.732 3.732z" />
              </svg>
            </div>
          </div>

          <div class="profile-info">
            <div class="name" id="profile-name">用戶姓名</div>
            <div class="role">User name</div>
          </div>
        </div>

        <!-- 行動電話 顯示，已經有 id="phone-display" 可動態更新 -->
        <div class="settings-item" id="phone-item">
          <div class="settings-content">
            <div class="settings-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor"
                viewBox="0 0 256 256">
                <path
                  d="M222.37,158.46l-47.11-21.11-.13-.06a16,16,0,0,0-15.17,1.4,8.12,8.12,0,0,0-.75.56L134.87,160c-15.42-7.49-31.34-23.29-38.83-38.51l20.78-24.71c.2-.25.39-.5.57-.77a16,16,0,0,0,1.32-15.06l0-.12L97.54,33.64a16,16,0,0,0-16.62-9.52A56.26,56.26,0,0,0,32,80c0,79.4,64.6,144,144,144a56.26,56.26,0,0,0,55.88-48.92A16,16,0,0,0,222.37,158.46ZM176,208A128.14,128.14,0,0,1,48,80,40.2,40.2,0,0,1,82.87,40a.61.61,0,0,0,0,.12l21,47L83.2,111.86a6.13,6.13,0,0,0-.57.77,16,16,0,0,0-1,15.7c9.06,18.53,27.73,37.06,46.46,46.11a16,16,0,0,0,15.75-1.14,8.44,8.44,0,0,0,.74-.56L168.89,152l47,21.05h0s.08,0,.11,0A40.21,40.21,0,0,1,176,208Z">
                </path>
              </svg>
            </div>
            <div class="settings-text">
              <p class="settings-title">行動電話</p>
              <p class="settings-description" id="phone-display">
                0987654322
              </p>
            </div>
          </div>
          <div class="settings-arrow">
            <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor"
              viewBox="0 0 256 256">
              <path
                d="M181.66,133.66l-80,80a8,8,0,0,1-11.32-11.32L164.69,128,90.34,53.66a8,8,0,0,1,11.32-11.32l80,80A8,8,0,0,1,181.66,133.66Z">
              </path>
            </svg>
          </div>
        </div>

        <!-- 電子郵件 -->
        <div class="settings-item" id="email-item-main">
          <div class="settings-content">
            <div class="settings-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor"
                viewBox="0 0 256 256">
                <path
                  d="M224,48H32a8,8,0,0,0-8,8V192a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A8,8,0,0,0,224,48ZM203.43,64,128,133.15,52.57,64ZM216,192H40V74.19l82.59,75.71a8,8,0,0,0,10.82,0L216,74.19V192Z">
                </path>
              </svg>
            </div>
            <div class="settings-text">
              <p class="settings-title">電子郵件</p>
              <p class="settings-description" id="email-main-item">
                --
              </p>
            </div>
          </div>
          <div class="settings-arrow">
            <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor"
              viewBox="0 0 256 256">
              <path
                d="M181.66,133.66l-80,80a8,8,0,0,1-11.32-11.32L164.69,128,90.34,53.66a8,8,0,0,1,11.32-11.32l80,80A8,8,0,0,1,181.66,133.66Z">
              </path>
            </svg>
          </div>
        </div>

        <!-- （以下保留其他未修改內容） -->
        <h3 class="section-title">安全性設定</h3>
        <div class="settings-item" id="credentials-item">
          <div class="settings-content">
            <div class="settings-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor"
                viewBox="0 0 256 256">
                <path
                  d="M48,56V200a8,8,0,0,1-16,0V56a8,8,0,0,1,16,0Zm92,54.5L120,117V96a8,8,0,0,0-16,0v21L84,110.5a8,8,0,0,0-5,15.22l20,6.49-12.34,17a8,8,0,1,0,12.94,9.4l12.34-17,12.34,17a8,8,0,1,0,12.94-9.4l-12.34-17,20-6.49A8,8,0,0,0,140,110.5Zm34,5.14a8,8,0,1,0,16,0V96a8,8,0,1,0-16,0Z">
                </path>
              </svg>
            </div>
            <div class="settings-text">
              <p class="settings-title">修改用戶代號</p>
              <p class="settings-description"></p>
            </div>
          </div>
          <div class="settings-arrow">
            <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor"
              viewBox="0 0 256 256">
              <path
                d="M181.66,133.66l-80,80a8,8,0,0,1-11.32-11.32L164.69,128,90.34,53.66a8,8,0,0,1,11.32-11.32l80,80A8,8,0,0,1,181.66,133.66Z">
              </path>
            </svg>
          </div>
        </div>

        <div class="settings-item">
          <div class="settings-content">
            <div class="settings-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor"
                viewBox="0 0 256 256">
                <path
                  d="M141.66,133.66l-40,40a8,8,0,0,1-11.32-11.32L116.69,136H24a8,8,0,0,1,0-16h92.69L90.34,93.66a8,8,0,0,1,11.32-11.32l40,40A8,8,0,0,1,141.66,133.66ZM200,32H136a8,8,0,0,0,0,16h56V208H136a8,8,0,0,0,0,16h64a8,8,0,0,0,8-8V40A8,8,0,0,0,200,32Z">
                </path>
              </svg>
            </div>
            <div class="settings-text">
              <p class="settings-title">近期登入紀錄</p>
              <p class="settings-description"></p>
            </div>
          </div>
          <div class="settings-arrow">
            <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor"
              viewBox="0 0 256 256">
              <path
                d="M181.66,133.66l-80,80a8,8,0,0,1-11.32-11.32L164.69,128,90.34,53.66a8,8,0,0,1,11.32-11.32l80,80A8,8,0,0,1,181.66,133.66Z">
              </path>
            </svg>
          </div>
        </div>

        <h3 class="section-title">通知設定</h3>
        <div class="settings-item">
          <div class="settings-content">
            <div class="settings-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor"
                viewBox="0 0 256 256">
                <path
                  d="M116,128a12,12,0,1,1,12,12A12,12,0,0,1,116,128ZM84,140a12,12,0,1,0-12-12A12,12,0,0,0,84,140Zm88,0a12,12,0,1,0-12-12A12,12,0,0,0,172,140Zm60-76V192a16,16,0,0,1-16,16H83l-32.6,28.16-.09.07A15.89,15.89,0,0,1,40,240a16.13,16.13,0,0,1-6.8-1.52A15.85,15.85,0,0,1,24,224V64A16,16,0,0,1,40,48H216A16,16,0,0,1,232,64ZM40,224h0ZM216,64H40V224l34.77-30A8,8,0,0,1,80,192H216Z">
                </path>
              </svg>
            </div>
            <div class="settings-text">
              <p class="settings-title">開啟／關閉簡訊 OTP</p>
              <p class="settings-description"></p>
            </div>
          </div>
          <div class="settings-arrow">
            <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor"
              viewBox="0 0 256 256">
              <path
                d="M181.66,133.66l-80,80a8,8,0,0,1-11.32-11.32L164.69,128,90.34,53.66a8,8,0,0,1,11.32-11.32l80,80A8,8,0,0,1,181.66,133.66Z">
              </path>
            </svg>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== 下面是 Modal 和 Toast 的部分 ===== -->
  <div class="modal" id="name-modal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-title" id="name-modal-title">新增姓名</div>
        <button class="close-button" onclick="closeModal('name-modal')">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 256 256">
            <path
              d="M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z">
            </path>
          </svg>
        </button>
      </div>
      <div class="form-group">
        <label class="form-label" for="first-name-input">姓</label>
        <input type="text" id="first-name-input" class="form-input" value="" placeholder="請輸入姓氏" />
      </div>
      <div class="form-group">
        <label class="form-label" for="last-name-input">名</label>
        <input type="text" id="last-name-input" class="form-input" value="" placeholder="請輸入名字" />
      </div>
      <button class="save-button" onclick="saveName()">儲存</button>
    </div>
  </div>

  <div class="modal" id="email-modal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-title" id="email-modal-title">新增電子郵件</div>
        <button class="close-button" onclick="closeModal('email-modal')">
          <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
            <path
              d="M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z">
            </path>
          </svg>
        </button>
      </div>
      <div class="form-group">
        <label class="form-label" for="email-input">電子郵件</label>
        <input type="email" id="email-input" class="form-input" value="" placeholder="請輸入電子郵件" />
      </div>
      <button class="save-button" onclick="saveEmail()">儲存</button>
    </div>
  </div>


  <!-- 行動電話 Modal -->
  <div class="modal" id="phone-modal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-title" id="phone-modal-title">編輯行動電話</div>
        <button class="close-button" onclick="closeModal('phone-modal')">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 256 256">
            <path
              d="M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z">
            </path>
          </svg>
        </button>
      </div>
      <div class="form-group">
        <label class="form-label" for="phone-input">行動電話</label>
        <input type="text" id="phone-input" class="form-input" value="" placeholder="請輸入行動電話" />
      </div>
      <button class="save-button" onclick="savePhone()">儲存</button>
    </div>
  </div>

  <!-- 電子郵件 Modal -->
  <div class="modal" id="main-email-modal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-title">修改電子郵件</div>
        <button class="close-button" onclick="closeModal('main-email-modal')">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 256 256">
            <path
              d="M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z">
            </path>
          </svg>
        </button>
      </div>
      <div class="form-group">
        <label class="form-label" for="main-email-input">電子郵件</label>
        <input type="email" id="main-email-input" class="form-input" placeholder="請輸入電子郵件" />
      </div>
      <button class="save-button" onclick="saveMainEmail()">儲存</button>
    </div>
  </div>

  <!-- 用戶代號 Modal -->
  <div class="modal" id="credentials-modal">
    <div class="modal-content">
      <!-- Modal 標題列 -->
      <div class="modal-header">
        <div class="modal-title">修改用戶代號</div>
        <button class="close-button" onclick="closeModal('credentials-modal')">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 256 256">
            <path
              d="M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z">
            </path>
          </svg>
        </button>
      </div>

      <!-- 表單欄位：用戶代號 -->
      <div class="form-group" style="position: relative;">
        <label class="form-label" for="user-code-input">用戶代號</label>
        <input type="text" id="user-code-input" class="form-input" placeholder="請輸入新的用戶代號" disabled />

        <!-- 編輯按鈕 SVG -->
        <button type="button" class="edit-button" onclick="enableEditing('user-code-input')"
          style="position: absolute; right: 10px; top: 46px; background: none; border: none; cursor: pointer;">
          <svg xmlns="http://www.w3.org/2000/svg" width="25px" height="25px" fill="currentColor" viewBox="0 0 256 256">
            <path
              d="M227.32,73.37,182.63,28.69a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.32,96a16,16,0,0,0,0-22.63ZM92.69,208H48V163.31l88-88L180.69,120ZM192,108.69,147.32,64l24-24L216,84.69Z">
            </path>
          </svg>
        </button>
      </div>

      <!-- 儲存按鈕 -->
      <button class="save-button" onclick="saveUserCode()">儲存</button>
    </div>
  </div>



  <!-- 上傳頭像的彈窗（放在 body 底部） -->
  <div
    class="modal-overlay fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 pointer-events-none transition-opacity"
    id="avatarUploadModalOverlay">
    <div class="modal-upload bg-white rounded-2xl p-6 w-11/12 max-w-md transform translate-y-5 opacity-0 transition-all"
      id="avatarUploadModal">
      <!-- Modal 標題列 -->
      <div class="modal-header flex justify-between items-center mb-4">
        <h3 class="modal-title text-xl font-semibold text-gray-800">更換頭像</h3>
        <button type="button"
          class="close-button text-gray-500 hover:text-gray-700 rounded-full w-8 h-8 flex items-center justify-center"
          id="avatarUploadCloseBtn">×</button>
      </div>

      <!-- 檔案上傳區 -->
      <!-- <div
        class="upload-area border-2 border-dashed border-gray-300 rounded-lg p-6 text-center mb-4 transition-colors cursor-pointer"
        id="avatarUploadArea">
        <div class="upload-icon text-4xl text-gray-500 mb-2">
          <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" viewBox="0 0 16 16">
            <path
              d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z">
            </path>
            <path
              d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z">
            </path>
          </svg>
        </div>
        <div class="upload-text text-gray-600 mb-1">點擊或拖曳檔案至此處</div>
        <div class="upload-hint text-gray-400 text-sm">支援 JPG、PNG 格式，檔案大小不超過 5MB</div>
      </div> -->
      <div
        class="upload-area border-2 border-dashed border-gray-300 rounded-lg p-6 text-center mb-4 transition-colors cursor-pointer relative"
        id="avatarUploadArea">
        <!-- 1) 預設顯示的上傳指示文字、圖示 -->
        <div id="upload-placeholder" class="flex flex-col items-center justify-center">
          <div class="upload-icon text-4xl text-gray-500 mb-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" viewBox="0 0 16 16">
              <path
                d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z">
              </path>
              <path
                d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z">
              </path>
            </svg>
          </div>
          <div class="upload-text text-gray-600 mb-1">點擊或拖曳檔案至此處</div>
          <div class="upload-hint text-gray-400 text-sm">支援 JPG、PNG 格式，檔案大小不超過 5MB</div>
        </div>

        <!-- 2) 圖片裁切區：一開始隱藏，選檔後顯示 -->
        <div id="crop-container" class="absolute inset-0 hidden overflow-hidden">
          <!-- 2a) 實際可拖曳的 <img> -->
          <img id="crop-image" src="" class="absolute top-0 left-0 cursor-move" style="user-select: none;" />

          <!-- 2b) 圓形遮罩：讓使用者知道要以哪個區域做最終頭像 -->
          <div id="crop-overlay" class="pointer-events-none"></div>
        </div>
      </div>



      <!-- 圖片預覽區 -->
      <div class="preview-container hidden mb-4 text-center" id="avatarUploadPreviewContainer">
        <img src="" alt="頭像預覽"
          class="image-preview w-32 h-32 rounded-full object-cover mx-auto border-4 border-white shadow-md"
          id="avatarUploadImagePreview">
      </div>

      <!-- 按鈕群組 -->
      <div class="button-group flex justify-end gap-3">
        <button type="button" class="cancel-button px-4 py-2 rounded-lg bg-gray-200 text-gray-600 hover:bg-gray-300"
          id="avatarUploadCancelBtn">取消</button>
        <button type="button"
          class="save-button px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:bg-blue-300"
          id="avatarUploadSaveBtn" disabled>儲存</button>
      </div>

      <!-- 隱藏的檔案輸入元件 -->
      <input type="file" accept="image/jpeg,image/png" id="avatarUploadFileInput" class="hidden">
    </div>
  </div>



  <div id="toast-container"></div>

</body>

</html>