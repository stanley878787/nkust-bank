{% load static %}
<!DOCTYPE html>
  <head>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&amp;family=Inter%3Awght%40400%3B500%3B700%3B900&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900"
    />

    <title>高科銀行</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />
    <link rel="stylesheet" href="{% static 'style/style.css' %}" />
    <script src="{% static 'js/invest.js' %}" defer></script>
    <script src="{% static 'js/jwt_session_timeout.js' %}" defer></script>
    <script src="{% static 'js/personal_upload.js' %}" defer></script>
  </head>   
  <body>
    <div class="container">
        <header>
        <a href="{% url 'dashboard_page' %}" style="text-decoration: none;"><div class="logo-container">
          <div class="logo">
            <svg
              viewBox="0 0 48 48"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M42.4379 44C42.4379 44 36.0744 33.9038 41.1692 24C46.8624 12.9336 42.2078 4 42.2078 4L7.01134 4C7.01134 4 11.6577 12.932 5.96912 23.9969C0.876273 33.9029 7.27094 44 7.27094 44L42.4379 44Z"
                fill="currentColor"
              ></path>
            </svg>
          </div>
          <h2 class="brand-name">NKUST Bank</h2>
        </div></a>

        <div class="nav-container">
          <div class="main-nav">
            <a class="nav-link" href="{% url 'dashboard_page' %}">帳務總覽</a>
            <a class="nav-link" href="{% url 'transfer_page' %}">轉帳</a>
            <a class="nav-link" href="{% url 'invest_page' %}">投資</a>
            <a class="nav-link" href="{% url 'recive_page' %}">明細查詢</a>
            <a class="nav-link" href="{% url 'personal_page' %}">個人資料</a>
            <a href="SignUp.html" class="btn-link">
              <button class="btn btn-secondary btn-md">
                <span class="btn-text">Log Out</span>
              </button>
            </a>
          </div>
          <div id="profileAvatar" class="avatar bg-center bg-no-repeat bg-cover rounded-full"
          style="width: 2.5rem; height: 2.5rem;"></div>
        </div>
      </header>

        <div class="main-content">
        <div class="content-container">
            <div class="stats-container">
                    <div class="stat-card positive">
                        <div class="stat-label">總預估現值 (TWD)</div>
                        <div class="stat-value">$1,452,454</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">總預估成本</div>
                        <div class="stat-value">$1,250,000</div>
                    </div>
                    <div class="stat-card positive">
                        <div style="display: flex;">
                            <div class="stat-label">總預估損益</div>
                            <div class="stat-label">(16.19)</div>
                        </div>
                        <div class="stat-value positive">+$202,454</div>
                    </div>
            </div>

            <div class="tab-container">
                <div class="tab tab-active" onclick="switchTab('investments')">
                    <span class="tab-text">我的投資</span>
                </div>
                <div class="tab tab-inactive" onclick="switchTab('trading')">
                    <span class="tab-text">交易下單</span>
                </div>
            </div>


            <!-- 投資項目展示 -->
            <div id="investments-section">
                <div class="investment-grid">
                    <div class="investment-item">
                        <div class="investment-header">
                            <div class="investment-name">台積電 (2330)</div>
                            <div class="investment-type">股票</div>
                        </div>
                        <div class="investment-details">
                            <div class="detail-row">
                                <span class="detail-label">持有股數</span>
                                <span class="detail-value">1,000 股</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">平均成本</span>
                                <span class="detail-value">$485.50</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">目前股價</span>
                                <span class="detail-value">$512.00</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">損益</span>
                                <span class="detail-value positive">+$26,500 (+5.46%)</span>
                            </div>
                        </div>
                    </div>

                    <div class="investment-item">
                        <div class="investment-header">
                            <div class="investment-name">美國科技基金</div>
                            <div class="investment-type">基金</div>
                        </div>
                        <div class="investment-details">
                            <div class="detail-row">
                                <span class="detail-label">持有單位</span>
                                <span class="detail-value">15,000 單位</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">平均成本</span>
                                <span class="detail-value">$32.80</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">目前淨值</span>
                                <span class="detail-value">$35.20</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">損益</span>
                                <span class="detail-value positive">+$36,000 (+7.32%)</span>
                            </div>
                        </div>
                    </div>

                    <div class="investment-item">
                        <div class="investment-header">
                            <div class="investment-name">比特幣 (BTC)</div>
                            <div class="investment-type">加密貨幣</div>
                        </div>
                        <div class="investment-details">
                            <div class="detail-row">
                                <span class="detail-label">持有數量</span>
                                <span class="detail-value">0.5 BTC</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">平均成本</span>
                                <span class="detail-value">$42,500</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">目前價格</span>
                                <span class="detail-value">$45,000</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">損益</span>
                                <span class="detail-value positive">+$1,250 (+5.88%)</span>
                            </div>
                        </div>
                    </div>

                    <div class="investment-item">
                        <div class="investment-header">
                            <div class="investment-name">長榮 (2603)</div>
                            <div class="investment-type">股票</div>
                        </div>
                        <div class="investment-details">
                            <div class="detail-row">
                                <span class="detail-label">持有股數</span>
                                <span class="detail-value">2,000 股</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">平均成本</span>
                                <span class="detail-value">$165.00</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">目前股價</span>
                                <span class="detail-value">$158.50</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">損益</span>
                                <span class="detail-value negative">-$13,000 (-3.94%)</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


             <!-- 交易區塊 -->
            <div id="trading-section" style="display: none;">
                <div class="trading-section">
                    <h2 class="heading-lg" style="margin-bottom: 1rem;">交易下單</h2>
                        
                    <div class="trading-header">
                        <button class="trade-type-btn active">買入</button>
                        <button class="trade-type-btn">賣出</button>
                    </div>

                    <form class="trading-form" onsubmit="handleTrade(event)">
                        <div>
                            <div class="form-group">
                                <label class="form-label">投資商品</label>
                                <select class="form-input" id="tradingProduct" required>
                                    <option value="">請選擇投資商品</option>
                                    <option value="2330">台積電 (2330)</option>
                                    <option value="2603">長榮 (2603)</option>
                                    <option value="0050">元大台灣50 (0050)</option>
                                    <option value="fund1">美國科技基金</option>
                                    <option value="btc">比特幣 (BTC)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label">交易數量</label>
                                <input type="number" class="form-input" id="tradingQuantity" 
                                        placeholder="請輸入交易數量" min="1" required>
                            </div>

                            <div class="form-group">
                                <label class="form-label">交易價格</label>
                                <input type="number" class="form-input" id="tradingPrice" 
                                        placeholder="請輸入交易價格" step="0.01" min="0" required>
                            </div>
                        </div>

                        <div>
                            <div class="form-group">
                                <label class="form-label">訂單類型</label>
                                <select class="form-input" id="orderType">
                                    <option value="market">市價單</option>
                                    <option value="limit">限價單</option>
                                    <option value="stop">停損單</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label">預估金額</label>
                                <input type="text" class="form-input" id="estimatedAmount" 
                                        placeholder="$0" readonly>
                            </div>

                            <div class="form-group">
                                <button type="submit" class="btn btn-primary btn-lg" style="width: 100%;">
                                    <span class="btn-text" id="tradeButtonText">確認買入</span>
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>



        </div>
      </div>

      <div id="toast" class="toast"></div>
  </body>
</html>
